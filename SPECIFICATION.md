# Тестовое задание на позицию Java Developer

## Описание вакансии :
   [Java developer Укрпошта](https://rabota.ua/company0/vacancy7109501?utm_source=applicationstatus&utm_medium=email&utm_campaign=delivered)
   
## Техническое задание, оригинал

    Сделать небольшой REST-сервис с использованием Spring. 
    Суть сервиса: покупка товаров с помощью API данного сервиса. 
    У нас есть три главные сущности: клиент (точнее его аккаунт), товар и скидки. Для этих сущностей предлагаю создать таблицы и использовать какую-нибудь in-memory базу данных, например, H2.
    Конкретное количество полей в каждой таблице, связи между таблицами, и вообще, их количество - на Ваше усмотрение. И подчеркну, что я только описываю сам базис, который должен быть реализован. Полная свобода действий в реализации и добавление новых деталей. Например, список всех товаров разделить на категории. 
    Должны быть реализованы как минимум такие энд-поинты:
    Передача и ответы запросов предлагаю формат Json. Можете реализовывать другой
    /create_user 
    /add_money – добавить денег на аккаунт, тут в запросе должен быть указан id, name юзера которому они зачислятся 
    /list – список товаров, добавления параметра Категория 
    /pay – купить товары(должен быть параметр указания id товаров который хотим купить, ну id того кто покупает, что бы проверить хватает ли у него средств и снять для успешного завершения операции покупки.
    В таблице скидок будут скидки на отдельные товары.
    В запросе /pay надо рассчитать сумму всех товаром с учетом скидок на них.
    Если есть опыт FRONT-ENDa, можете сделать дополнительно минимальный интерфейс, снова повторюсь, инструмент на ваш выбор. Это как доп.задание, запрос-ответ в виде Json устроит.
    *Дополнительно сделайте такой механизм – при покупке товаров, если товаров со скидками больше чем  3, то использовать в расчете суммы тольке те 3 скидки которые наиболее выгодны покупателю. Больше 3 товаров со скидками имееться в виду 3 разных товара, а не 3 экземпляра одного.
    В расчете самых выгодных  учитывать количество одинаковых товаров.
    Если есть понимание, что такое JPA реализуйте с ним. 
    Для сборки Maven / Gradle выбирайте сами.
   
## Техническое задание, разбор полетов
   - Создание API для покупок в магазине
   - Сущности (Entity):
        - Клиент (Accound)    
        - Товар (Product)    
        - Скидки (Discount)  
   - Контроллер и его ендпоинты
   ! Реализация с помощью JSON
        Ендпоинты:
        - /create_user - создание нового пользователя !!! Проверка или пользователь существует
        - /add_money (id, name) - Добавление денег на указанный аккаунт
        - /list - список товаров
            ? добавления параметра Категория, это как?
        - /pay - купить товары(указаны id товаров для покупки, id пользователя, который покупает товар)
            ! Сумма с учетом скидок
            ! Проверка на возможность покупки товаров (возврат оставшейся суммы после покупки)
            ! Проверка наличия товаров на складе, в нужном количестве, в момент покупки
            ! Покупка товаров (списание количества товара и средств с покупателя)  
        ** Дополнительный механизм, если товаров со скидками больше чем 3, в рассчет брать только те товары, 
            сумма выгоды по которым будет наиболее выгодна для покупателя
            ?? Т.е. по сути со скидкой получаются только 3 товара
                  
            